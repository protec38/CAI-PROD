<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <!-- ✅ Meilleur rendu mobile ccc-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- ✅ CSRF pour auto-injection -->
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <title>{% block title %}Titre{% endblock %}</title>

    <!-- Fonts & Icons (inchangés) -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: #f5f5f5;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        h1 {
            color: #003b71;
        }

        a.btn {
            display: inline-block;
            background-color: #003b71;
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            border-radius: 4px;
            margin-bottom: 10px;
        }

        a.btn:hover {
            background-color: #002952;
        }
    </style>

    <!-- Ton CSS statique (inchangé) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    {% block head %}{% endblock %}
</head>
<body>
    <div class="container">
        {% block content %}
        {% endblock %}
    </div>

    <!-- ✅ Auto-injection CSRF dans tous les <form method="POST"> -->
    <script>
    (function(){
      try{
        var meta = document.querySelector('meta[name="csrf-token"]');
        if(!meta) return;
        var token = meta.getAttribute('content') || '';
        document.querySelectorAll('form').forEach(function(f){
          var method = (f.getAttribute('method') || '').toLowerCase();
          if(method === 'post' && !f.hasAttribute('data-no-auto-csrf')){
            if(!f.querySelector('input[name="csrf_token"]')){
              var i = document.createElement('input');
              i.type = 'hidden';
              i.name = 'csrf_token';
              i.value = token;
              f.prepend(i);
            }
          }
        });
      }catch(e){}
    })();
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>
